(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-030902fa"],{"04d1":function(t,e,n){var r=n("342f"),i=r.match(/firefox\/(\d+)/i);t.exports=!!i&&+i[1]},"1d58":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("el-descriptions",{staticClass:"margin-top",attrs:{title:"文章信息",column:2}},[n("template",{slot:"extra"},[n("play-article-btn",{attrs:{articleId:t.articleId}}),n("el-divider",{attrs:{direction:"vertical"}}),n("read-article-btn",{attrs:{articleId:t.articleId}}),n("el-divider",{attrs:{direction:"vertical"}}),n("test-article-btn",{attrs:{articleId:t.articleId}})],1),n("el-descriptions-item",{attrs:{label:"标题"}},[t._v(t._s(t.article.title))]),n("el-descriptions-item",{attrs:{label:"分组"}},[n("el-tag",{attrs:{size:"small"}},[t._v(t._s(t.article.groupName))])],1),n("el-descriptions-item",{attrs:{label:"图片"}},[t.article.picture?n("img",{staticStyle:{width:"200px"},attrs:{src:t.baseUrl+t.article.picture}}):t._e()]),n("el-descriptions-item",{attrs:{label:"音频"}},[n("el-link",{attrs:{underline:!1,type:"primary"}},[n("svg-icon",{attrs:{"icon-class":"sound"},on:{click:function(){return t.play(t.article.mp3)}}})],1)],1),n("el-descriptions-item",{attrs:{label:"描述"}},[t._v(t._s(t.article.comment))])],2),n("el-descriptions",{staticClass:"margin-top",attrs:{title:"句子信息"}}),n("sentence-list",{attrs:{article:t.article,play:t.play,getWordList:t.getWordList,wordList:t.wordList}}),n("el-descriptions",{staticClass:"margin-top",attrs:{title:"单词信息 (共"+t.wordTotal+"条)"}}),n("ArticleWordList",{attrs:{play:t.play,showScore:!0,articleId:t.articleId,listData:t.wordList,getWordList:t.getWordList}})],1)},i=[],o=(n("4e82"),n("dcec")),a=n("1dc7"),l=n("c074"),c=n("419c"),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-row",{staticClass:"mb8",attrs:{gutter:10}},[n("el-col",{attrs:{span:1.5}},[n("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:t.handleAddSentence}},[t._v("添加")])],1),n("batch-add-sentence-btn",{attrs:{sentenceTotal:t.sentenceTotal,addSentence:t.saveSentence,getSentenceList:t.getSentenceList,articleId:t.article.id}}),n("el-col",{attrs:{span:1.5}},[n("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:t.handleDeleteSentence}},[t._v("删除")])],1),n("el-col",{attrs:{span:1.5}},[n("viewArticleBtn",{attrs:{articleId:t.article.id}})],1)],1),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{data:t.sentenceList},on:{"selection-change":t.handleSentenceSelectionChange}},[n("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),n("el-table-column",{attrs:{label:"句子内容",align:"center",prop:"content"}}),n("el-table-column",{attrs:{label:"解释",align:"center",prop:"acceptation"}}),n("el-table-column",{attrs:{label:"序号",align:"center",prop:"idx"}}),n("el-table-column",{attrs:{label:"音频",align:"center",prop:"mp3"},scopedSlots:t._u([{key:"default",fn:function(e){return e.row.mp3||e.row.mp3Time&&t.article.mp3?[n("el-button",{attrs:{type:"text"},on:{click:function(){return t.play(e.row.mp3||t.article.mp3,e.row.mp3Time)}}},[n("svg-icon",{attrs:{"icon-class":"sound"}})],1)]:void 0}}],null,!0)}),n("el-table-column",{attrs:{label:"MP3开始结束时间",align:"center",prop:"mp3Time"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t.transMp3Time(e.row.mp3Time))+" ")]}}])}),n("el-table-column",{attrs:{label:"操作",align:"center","class-name":"small-padding fixed-width"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["eng:sentence:edit"],expression:"['eng:sentence:edit']"}],attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(n){return t.handleUpdateSentence(e.row)}}},[t._v("修改")]),n("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["eng:word:edit"],expression:"['eng:word:edit']"}],attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(n){return t.handleUpdateWord(e.row)}}},[t._v("生词")]),n("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["eng:sentence:remove"],expression:"['eng:sentence:remove']"}],attrs:{size:"mini",type:"text",icon:"el-icon-delete"},on:{click:function(n){return t.handleDeleteSentence(e.row)}}},[t._v("删除")])]}}])})],1),n("pagination",{directives:[{name:"show",rawName:"v-show",value:t.sentenceTotal>0,expression:"sentenceTotal > 0"}],attrs:{total:t.sentenceTotal,page:t.queryParams.pageNum,limit:t.queryParams.pageSize},on:{"update:page":function(e){return t.$set(t.queryParams,"pageNum",e)},"update:limit":function(e){return t.$set(t.queryParams,"pageSize",e)},pagination:t.getSentenceList}}),n("el-dialog",{attrs:{title:t.title,visible:t.openSentence,width:"500px","append-to-body":""},on:{"update:visible":function(e){t.openSentence=e}}},[n("el-form",{ref:"form",attrs:{model:t.form,rules:t.sentenceRules,"label-width":"80px"}},[n("el-form-item",{attrs:{label:"句子内容",prop:"content"}},[n("el-input",{attrs:{type:"textarea",placeholder:"请输入内容"},model:{value:t.form.content,callback:function(e){t.$set(t.form,"content",e)},expression:"form.content"}})],1),n("el-form-item",{attrs:{label:"解释",prop:"acceptation"}},[n("el-input",{attrs:{type:"textarea",placeholder:"请输入内容"},model:{value:t.form.acceptation,callback:function(e){t.$set(t.form,"acceptation",e)},expression:"form.acceptation"}})],1),n("el-form-item",{attrs:{label:"序号",prop:"idx"}},[n("el-input",{attrs:{placeholder:"请输入序号"},model:{value:t.form.idx,callback:function(e){t.$set(t.form,"idx",e)},expression:"form.idx"}})],1),t.article.mp3?n("el-form-item",{attrs:{label:"独立音频",prop:"useTopMp3"}},[n("el-radio-group",{model:{value:t.useTopMp3,callback:function(e){t.useTopMp3=e},expression:"useTopMp3"}},[n("el-radio-button",{attrs:{label:0}},[t._v("是")]),n("el-radio-button",{attrs:{label:1}},[t._v("否")])],1)],1):t._e(),t.useTopMp3?t._e():n("div",[n("el-form-item",{attrs:{label:"上传方式",prop:"uploadType"}},[n("el-radio-group",{model:{value:t.uploadType,callback:function(e){t.uploadType=e},expression:"uploadType"}},[n("el-radio",{attrs:{label:"file"}},[t._v("文件")]),n("el-radio",{attrs:{label:"url"}},[t._v("URL")])],1)],1),n("el-form-item",{attrs:{label:"音频",prop:"mp3"}},["file"==t.uploadType?n("file-upload",{attrs:{fileType:["mp3","m4a"],uploadType:"article"},model:{value:t.form.mp3,callback:function(e){t.$set(t.form,"mp3",e)},expression:"form.mp3"}}):t._e(),"url"==t.uploadType?n("uploadByUrl",{attrs:{uploadType:"article"},model:{value:t.form.mp3,callback:function(e){t.$set(t.form,"mp3",e)},expression:"form.mp3"}}):t._e()],1)],1),n("el-form-item",{attrs:{label:"MP3时间",prop:"mp3Time"}},[n("el-input",{attrs:{placeholder:"请输入MP3时间"},model:{value:t.form.mp3Time,callback:function(e){t.$set(t.form,"mp3Time",e)},expression:"form.mp3Time"}}),t._v(" 格式1: 开始时间(int),持续时间(float),倍速 例: 5,8.5,0.8"),n("br"),t._v(" 格式2: 开始时间(分:秒),持续时间(float),倍速 例: 02:55,8.5,0.8"),n("br"),n("el-button",{attrs:{type:"text"},on:{click:function(){return t.play(t.useTopMp3?t.article.mp3:t.form.mp3,t.form.mp3Time)}}},[t._v("试听 ")])],1)],1),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:t.submitForm}},[t._v("确 定")]),n("el-button",{on:{click:t.cancel}},[t._v("取 消")])],1)],1),n("el-dialog",{attrs:{title:t.title,visible:t.openWord,width:"500px","append-to-body":""},on:{"update:visible":function(e){t.openWord=e}}},[t._l(t.splitWordList,(function(e,r){var i=e.text,o=e.isWord,a=e.style;return n("div",{key:r,staticStyle:{display:"inline-block"}},[o?n("el-button",{style:a,attrs:{size:"mini",type:"text"},on:{click:function(e){return t.handleClickWord(i)}}},[t._v(t._s(i))]):t._e(),o?t._e():n("div",{style:a},[t._v(t._s(i))])],1)})),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:t.submitWord}},[t._v("确 定")]),n("el-button",{on:{click:t.cancel}},[t._v("取 消")])],1)],2)],1)},d=[],u=n("2909"),p=n("5530"),f=(n("7db0"),n("d81d"),n("14d9"),n("a434"),n("d3b7"),n("ac1f"),n("00b4"),n("466d"),n("1276"),n("159b"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.handleShowDialog}},[t._v("输入网址")]),t._v(" "+t._s(t.fileName)+" "),n("el-dialog",{attrs:{title:"",visible:t.dialogVisible,"append-to-body":"",width:"30%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[n("el-input",{attrs:{placeholder:"输入网址"},model:{value:t.fileUrl,callback:function(e){t.fileUrl=e},expression:"fileUrl"}}),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:t.handleUploadUrl}},[t._v("确 定")])],1)],1)],1)}),m=[],h=n("2934"),b={props:["uploadType"],data:function(){return{dialogVisible:!1,fileUrl:"",fileName:""}},methods:{handleUploadUrl:function(){var t=this;Object(h["a"])(this.fileUrl,this.uploadType).then((function(e){(e.code=200)&&(t.dialogVisible=!1,t.$emit("input",e.url),console.log("===================================="),console.log(e.url),console.log("===================================="),t.fileName=e.fileName)}))},handleShowDialog:function(){this.dialogVisible=!0,this.fileUrl=""}}},v=b,g=n("2877"),y=Object(g["a"])(v,f,m,!1,null,null,null),w=y.exports,x=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-button",{attrs:{icon:"el-icon-search",size:"mini"},on:{click:t.handleViewArticle}},[t._v(" 查看文章 ")]),n("el-dialog",{attrs:{title:"查看文章内容",visible:t.open,width:"500px","append-to-body":""},on:{"update:visible":function(e){t.open=e}}},[t._l(t.displayList,(function(e,r){return n("section",{key:e+r,staticClass:"view-article-sentence"},[t._v(" "+t._s(e)),n("br"),n("br")])})),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(){return t.open=!1}}},[t._v("关闭")])],1)],2)],1)},_=[],S={props:["articleId"],data:function(){return{open:!1,displayList:[]}},methods:{handleViewArticle:function(){var t=this;Object(o["c"])(this.articleId).then((function(e){t.displayList=e.data,t.open=!0}))}}},k=S,T=(n("f15b"),Object(g["a"])(k,x,_,!1,null,"fa832202",null)),W=T.exports,O=n("ac3c"),I=n("baee"),j=(n("13d5"),n("fb6a"),n("c35a"),n("25eb"),n("498a"),/[\n]+/),L=function(t,e){var n=[],r=/([a-z|'|-]+)/gi;e&&(r=/([\u4e00-\u9fa5])/gi);var i=null;return t.reduce((function(t,e){if(e){var n={allWords:[]},o=0;while(i=r.exec(e)){var a=i[0];i.index>o&&n.allWords.push({text:e.slice(o,i.index).trim(),isWord:!1}),n.allWords.push({text:a,isWord:!0}),o=i.index+a.length}o<e.length&&n.allWords.push({text:e.slice(o).trim(),isWord:!1}),t.push(n)}return t}),n)},$=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-col",{attrs:{span:1.5}},[n("el-button",{attrs:{icon:"el-icon-plus",size:"mini"},on:{click:t.handleBatchAddSentence}},[t._v("批量添加")])],1),n("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{title:"批量添加",visible:t.open,width:"500px","append-to-body":""},on:{"update:visible":function(e){t.open=e}}},[n("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules}},[n("el-form-item",{attrs:{label:"句子内容",prop:"sentences"}},[n("el-input",{attrs:{type:"textarea",rows:10,placeholder:"请输入内容,多个句子请换行"},model:{value:t.form.sentences,callback:function(e){t.$set(t.form,"sentences",e)},expression:"form.sentences"}})],1)],1),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:t.submitForm}},[t._v("确 定")]),n("el-button",{on:{click:t.cancel}},[t._v("取 消")])],1)],1)],1)},A=[],N=(n("4de4"),{name:"BatchAddSentenceBtn",props:["addSentence","sentenceTotal","getSentenceList","articleId"],data:function(){return{loading:!1,form:{},open:!1,rules:{sentences:[{required:!0,message:"内容不能为空",trigger:"change"}]}}},methods:{cancel:function(){this.open=!1},reset:function(){this.form={sentences:""},this.resetForm("form")},handleBatchAddSentence:function(){this.open=!0,this.reset()},submitForm:function(){var t=this;this.$refs["form"].validate((function(e){if(e){t.loading=!0;var n=t.form.sentences.split("\n").filter((function(t){return t})),r=0;n.forEach((function(e,i){t.addSentence({articleId:t.articleId,content:e,idx:t.sentenceTotal+i+1},(function(){r++,r==n.length&&(t.$modal.msgSuccess("新增成功"),t.open=!1,t.getSentenceList(),t.loading=!1)}))}))}}))}}}),E=N,C=Object(g["a"])(E,$,A,!1,null,null,null),M=C.exports,P={name:"sentenceList",props:["article","play","wordList","getWordList"],components:{uploadByUrl:w,ArticleWordList:c["a"],viewArticleBtn:W,BatchAddSentenceBtn:M},data:function(){return{uploadType:"file",useTopMp3:1,loading:!0,sentenceIds:[],single:!0,multiple:!0,sentenceTotal:0,sentenceList:[],title:"",openSentence:!1,openWord:!1,queryParams:{pageNum:1,pageSize:10,articleId:null},form:{},sentenceRules:{},sentenceWordList:[],splitWordList:[]}},watch:{article:function(){this.article.id&&this.getSentenceList()},wordList:function(){this.sentenceWordList=this.wordList.map((function(t){return t.wordName}))}},methods:{getSentenceList:function(){var t=this;this.loading=!0;var e=Object(p["a"])(Object(p["a"])({},this.queryParams),{},{articleId:this.article.id});this.queryParams=e,Object(O["e"])(e).then((function(e){t.sentenceList=e.rows,t.sentenceTotal=e.total,t.loading=!1}))},cancel:function(){this.openSentence=!1,this.openWord=!1},resetSentence:function(){this.form={id:null,articleId:this.article.id,content:null,acceptation:null,idx:null,picture:null,mp3:null,mp3Time:null,status:null},this.uploadType="file",this.useTopMp3=this.article.mp3?1:0,this.resetForm("form")},handleQuery:function(){this.queryParams.pageNum=1,this.getSentenceList()},resetSentenceQuery:function(){this.resetSentence("queryForm"),this.handleQuery()},handleSentenceSelectionChange:function(t){this.sentenceIds=t.map((function(t){return t.id})),this.single=1!==t.length,this.multiple=!t.length},handleUpdateSentence:function(t){var e=this;this.resetSentence();var n=t.id||this.sentenceIds;Object(O["c"])(n).then((function(t){e.form=t.data,e.form.mp3Time=e.transMp3Time(e.form.mp3Time),e.useTopMp3=e.article.mp3?e.form.mp3?0:1:0,e.uploadType="file",e.openSentence=!0,e.title="修改句子"}))},handleUpdateWord:function(t){this.form=t,this.splitWordList=this.getSplitWordList(),this.openWord=!0,this.title="修改生词"},getSplitWordList:function(){var t=this,e=this.form.content,n=L(e.split(j))[0].allWords;return n.forEach((function(e){t.sentenceWordList.find((function(t){return t==e.text.toLowerCase()}))?e.style={padding:"5px",margin:"0 5px",backgroundColor:"rgba(241, 196, 15, 0.3)",borderColor:"rgba(211, 84, 0, 0.5)"}:e.isWord&&(e.style={display:"inline-block",padding:"5px",margin:"0 5px"})})),n},handleClickWord:function(t){var e=this.sentenceWordList.indexOf(t.toLowerCase()),n=Object(u["a"])(this.sentenceWordList);e>-1?n.splice(e,1):n.push(t.toLowerCase()),this.sentenceWordList=n,this.splitWordList=this.getSplitWordList()},submitForm:function(){var t=this;this.$refs["form"].validate((function(e){e&&(t.useTopMp3&&(t.form.mp3=""),t.saveSentence(t.form,(function(){t.$modal.msgSuccess("保存成功"),t.openSentence=!1,t.getSentenceList()})))}))},saveSentence:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};if(!t.mp3Time){var n=t.content.match(/^\[(\d\d:\d\d)/);n&&(t.mp3Time=n[1]+","+(t.length<60?5:8))}t.mp3Time=this.transMp3Time(t.mp3Time),null!=t.id?Object(O["f"])(t).then(e):Object(O["a"])(t).then(e)},submitWord:function(){var t=this;Object(I["h"])(this.article.id,this.sentenceWordList).then((function(){t.$modal.msgSuccess("修改成功"),t.openWord=!1,t.getWordList()}))},handleDeleteSentence:function(t){var e=this,n=t.id||this.sentenceIds;this.$modal.confirm("是否确认删除选中的句子？").then((function(){return Object(O["b"])(n)})).then((function(){e.getSentenceList(),e.$modal.msgSuccess("删除成功")})).catch((function(){}))},rowEngSentenceIndex:function(t){var e=t.row,n=t.rowIndex;e.index=n+1},handleAddSentence:function(){this.resetSentence(),this.form.idx=this.sentenceTotal+1,this.openSentence=!0,this.title="添加文章句子"},transMp3Time:function(t){var e=(t||"").split(",");if(2==e.length&&/^\d+:\d+$/.test(e[0])){var n=e[0].split(":"),r=60*parseInt(n[0])+parseInt(n[1]);return r+","+e[1]}return t}}},z=P,U=Object(g["a"])(z,s,d,!1,null,null,null),B=U.exports,F=n("d463"),D=n("9be0"),R=n("37d0"),q={name:"Article",components:{ArticleWordList:c["a"],SentenceList:B,TestArticleBtn:F["a"],ReadArticleBtn:D["a"],PlayArticleBtn:R["a"]},data:function(){return{articleId:0,article:{},baseUrl:"/prod-api",loading:!0,wordTotal:0,form:{},wordList:[]}},created:function(){this.articleId=this.$route.params&&this.$route.params.articleId,this.articleId&&(this.getArticle(),this.getWordList())},methods:{getArticle:function(){var t=this;this.loading=!0,Object(o["d"])(this.articleId).then((function(e){var n=e.data;t.article=n,t.loading=!1}))},play:function(t,e){t&&Object(l["a"])(t,e)},getWordList:function(){var t=this;this.loading=!0,Object(a["b"])(this.articleId,!1,1e3,"word_name").then((function(e){t.wordList=e.rows.sort((function(t,e){return t.familiarity-e.familiarity})),t.wordTotal=e.total,t.loading=!1}))}}},V=q,J=(n("29a0"),Object(g["a"])(V,r,i,!1,null,"734898ca",null));e["default"]=J.exports},"1dc7":function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return a}));var r=n("b775");function i(t){return Object(r["a"])({url:"/eng/score/batch",method:"put",data:t})}function o(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"familiarity",i={pageNum:1,pageSize:n,orderByColumn:r,isAsc:"ascending",articleId:t,withSentence:e};return a(i)}function a(t){return Object(r["a"])({url:"/eng/score/list/user",method:"get",params:t})}},"23b2":function(t,e,n){},"25eb":function(t,e,n){var r=n("23e7"),i=n("c20d");r({target:"Number",stat:!0,forced:Number.parseInt!=i},{parseInt:i})},2934:function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return o}));var r=n("b775");function i(t){return Object(r["a"])({url:"/common/uploadImg/note",method:"post",data:{file:t}})}function o(t,e){return Object(r["a"])({url:"/common/upload/url/"+e,method:"post",params:{url:t}})}},"29a0":function(t,e,n){"use strict";n("23b2")},"37d0":function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["eng:article:edit"],expression:"['eng:article:edit']"}],attrs:{size:"mini",type:"text",icon:"el-icon-service"},on:{click:t.handlePlayArticle}},[t._v("播放")])},i=[],o=(n("14d9"),{props:["articleId"],methods:{handlePlayArticle:function(){this.$router.push("/eng/playlist?article="+this.articleId)}}}),a=o,l=n("2877"),c=Object(l["a"])(a,r,i,!1,null,null,null);e["a"]=c.exports},"419c":function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("WordTable",t._b({scopedSlots:t._u([{key:"toolBtn",fn:function(e){return[n("el-col",{attrs:{span:1.5}},[n("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini",disabled:0==e.relIds.length},on:{click:function(){return t.handleDeleteRel(e.relIds)}}},[t._v("删除")])],1),t._t("rightBar")]}},{key:"tableBtn",fn:function(e){return[n("el-button",{attrs:{size:"mini",type:"text",icon:"el-icon-delete"},on:{click:function(n){return t.handleDeleteRel([e.word.relId])}}},[t._v("删除")])]}}],null,!0)},"WordTable",t.$props,!1))],1)},i=[],o=n("e532"),a=n("6941"),l={props:["listData","loading","articleId","getWordList","play"],components:{WordTable:a["a"]},data:function(){return{}},methods:{handleDeleteRel:function(t){var e=this;this.$modal.confirm("是否确认删除选中的单词？").then((function(){return Object(o["b"])(t)})).then((function(){e.getWordList(),e.$modal.msgSuccess("删除成功")})).catch((function(){}))}}},c=l,s=n("2877"),d=Object(s["a"])(c,r,i,!1,null,null,null);e["a"]=d.exports},"466d":function(t,e,n){"use strict";var r=n("c65b"),i=n("d784"),o=n("825a"),a=n("7234"),l=n("50c4"),c=n("577e"),s=n("1d80"),d=n("dc4a"),u=n("8aa5"),p=n("14c3");i("match",(function(t,e,n){return[function(e){var n=s(this),i=a(e)?void 0:d(e,t);return i?r(i,e,n):new RegExp(e)[t](c(n))},function(t){var r=o(this),i=c(t),a=n(e,r,i);if(a.done)return a.value;if(!r.global)return p(r,i);var s=r.unicode;r.lastIndex=0;var d,f=[],m=0;while(null!==(d=p(r,i))){var h=c(d[0]);f[m]=h,""===h&&(r.lastIndex=u(i,l(r.lastIndex),s)),m++}return 0===m?null:f}]}))},"4e82":function(t,e,n){"use strict";var r=n("23e7"),i=n("e330"),o=n("59ed"),a=n("7b0b"),l=n("07fa"),c=n("083a"),s=n("577e"),d=n("d039"),u=n("addb"),p=n("a640"),f=n("04d1"),m=n("d998"),h=n("2d00"),b=n("512ce"),v=[],g=i(v.sort),y=i(v.push),w=d((function(){v.sort(void 0)})),x=d((function(){v.sort(null)})),_=p("sort"),S=!d((function(){if(h)return h<70;if(!(f&&f>3)){if(m)return!0;if(b)return b<603;var t,e,n,r,i="";for(t=65;t<76;t++){switch(e=String.fromCharCode(t),t){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(r=0;r<47;r++)v.push({k:e+r,v:n})}for(v.sort((function(t,e){return e.v-t.v})),r=0;r<v.length;r++)e=v[r].k.charAt(0),i.charAt(i.length-1)!==e&&(i+=e);return"DGBEFHACIJK"!==i}})),k=w||!x||!_||!S,T=function(t){return function(e,n){return void 0===n?-1:void 0===e?1:void 0!==t?+t(e,n)||0:s(e)>s(n)?1:-1}};r({target:"Array",proto:!0,forced:k},{sort:function(t){void 0!==t&&o(t);var e=a(this);if(S)return void 0===t?g(e):g(e,t);var n,r,i=[],s=l(e);for(r=0;r<s;r++)r in e&&y(i,e[r]);u(i,T(t)),n=l(i),r=0;while(r<n)e[r]=i[r++];while(r<s)c(e,r++);return e}})},"512ce":function(t,e,n){var r=n("342f"),i=r.match(/AppleWebKit\/(\d+)\./);t.exports=!!i&&+i[1]},"5f25":function(t,e,n){},6941:function(t,e,n){"use strict";var r=function(){var t=this,e=this,n=e.$createElement,r=e._self._c||n;return r("div",[r("el-row",{staticClass:"mb8",attrs:{gutter:10}},[r("el-col",{attrs:{span:1.5}},[e.manualAdd?e._e():r("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:function(){return e.handleAddWord(!1)}}},[e._v(" 添加 ")])],1),e.manualAdd?r("el-col",{attrs:{span:1.5}},[r("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:function(){return e.handleAddWord(!0)}}},[e._v(" 手工添加 ")])],1):e._e(),e._t("toolBtn",null,{ids:e.ids,relIds:e.relIds})],2),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.listData},on:{"selection-change":e.handleSelectionChange}},[r("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),r("el-table-column",{attrs:{label:"单词",align:"center",prop:"wordName"}}),r("el-table-column",{attrs:{label:"音标",align:"center",prop:"phonetics"}}),r("el-table-column",{attrs:{label:"解释",align:"center",prop:"acceptation",formatter:e.acceptationFormatter}}),e.hideScore?e._e():r("el-table-column",{attrs:{label:"熟悉度",align:"center",prop:"familiarity"}}),r("el-table-column",{attrs:{label:"简明释义",align:"center",prop:"exchange"}}),r("el-table-column",{attrs:{label:"音频",align:"center",prop:"phMp3"},scopedSlots:e._u([{key:"default",fn:function(t){return t.row.phMp3?[r("el-button",{attrs:{type:"text"},on:{click:function(){return e.play(t.row.phMp3)}}},[r("svg-icon",{attrs:{"icon-class":"sound"}})],1)]:void 0}}],null,!0)}),r("el-table-column",{attrs:{label:"操作",align:"center","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._t("tableBtn",null,{word:t.row}),r("el-button",{attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(n){return e.handleUpdate(t.row)}}},[e._v(" 修改 ")])]}}],null,!0)})],1),r("el-dialog",{attrs:{title:"添加",visible:e.openAdd,width:"500px","append-to-body":""},on:{"update:visible":function(t){e.openAdd=t}}},[r("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"80px"},nativeOn:{submit:function(t){t.preventDefault()}}},[r("el-form-item",{attrs:{label:"单词内容",prop:"wordName"}},[r("div",{staticStyle:{display:"flex",gap:"5px"}},[r("el-input",{attrs:{placeholder:"请输入单词内容"},on:{input:function(t){return e.word={}}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchWord(t)}},model:{value:e.form.wordName,callback:function(t){e.$set(e.form,"wordName",t)},expression:"form.wordName"}}),r("el-button",{on:{click:e.searchWord}},[e._v("查詢")])],1)]),e.word.phonetics?r("el-form-item",[e._v(" /"+e._s(e.word.phonetics)+"/ "),r("el-button",{attrs:{type:"text"},on:{click:function(){return e.play(e.word.phMp3)}}},[r("svg-icon",{attrs:{"icon-class":"sound"}})],1),e._l(e.acceptations,(function(t){return r("div",{key:t},[e._v(" "+e._s(t)+" ")])}))],2):e._e()],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e.acceptations&&e.acceptations.length>0?r("el-button",{attrs:{type:"primary"},on:{click:e.addWordSubmit}},[e._v("添加")]):e._e(),r("el-button",{on:{click:function(){return e.openAdd=!1}}},[e._v("取 消")])],1)],1),r("el-dialog",{attrs:{title:"单词详情",visible:e.openEdit,width:"500px","append-to-body":""},on:{"update:visible":function(t){e.openEdit=t}}},[r("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"单词内容",prop:"wordName"}},[r("el-input",{attrs:{placeholder:"请输入单词内容",disabled:e.isEdit},model:{value:e.form.wordName,callback:function(t){e.$set(e.form,"wordName",t)},expression:"form.wordName"}})],1),r("el-form-item",{attrs:{label:"音标",prop:"phonetics"}},[r("el-input",{attrs:{placeholder:"请输入音标",disabled:e.isEdit},model:{value:e.form.phonetics,callback:function(t){e.$set(e.form,"phonetics",t)},expression:"form.phonetics"}})],1),r("el-form-item",{attrs:{label:"解释",prop:"acceptation"}},[r("el-input",{attrs:{disabled:e.isEdit,type:"textarea",placeholder:"请输入内容"},model:{value:e.form.acceptation,callback:function(t){e.$set(e.form,"acceptation",t)},expression:"form.acceptation"}})],1),r("el-form-item",{attrs:{label:"手动注释",prop:"exchange"}},[r("el-input",{attrs:{placeholder:"请输入手动注释"},model:{value:e.form.exchange,callback:function(t){e.$set(e.form,"exchange",t)},expression:"form.exchange"}},[r("el-button",{attrs:{slot:"append"},on:{click:function(){return t.form.exchange=t.form.acceptation}},slot:"append"},[e._v("复制解释")])],1)],1),r("el-form-item",{attrs:{label:"音频位置",prop:"phMp3"}},[r("file-upload",{attrs:{fileType:["mp3"],uploadType:"word"},model:{value:e.form.phMp3,callback:function(t){e.$set(e.form,"phMp3",t)},expression:"form.phMp3"}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:e.getFromApi}},[e._v("获取API数据")]),r("el-button",{attrs:{type:"primary"},on:{click:e.saveWordSubmit}},[e._v("确 定")]),r("el-button",{on:{click:function(){return e.openEdit=!1}}},[e._v("取 消")])],1)],1)],1)},i=[],o=n("5530"),a=(n("d81d"),n("baee")),l={props:["listData","loading","articleId","getWordList","play","manualAdd","hideScore"],data:function(){return{openAdd:!1,openEdit:!1,isEdit:!1,ids:[],relIds:[],form:{},word:{},rules:{wordName:[{required:!0,message:"单词内容不能为空",trigger:"blur"}]}}},computed:{acceptations:function(){return this.word.acceptation?this.word.acceptation.split("|"):[]}},methods:{acceptationFormatter:function(t){var e=t.acceptation;if(e){var n=e.split("|");return n[0]+(n.length>1?"...":"")}return""},handleSelectionChange:function(t){this.relIds=t.map((function(t){return t.relId})),this.ids=t.map((function(t){return t.id}))},handleAddWord:function(t){t?(this.openEdit=!0,this.isEdit=!1):this.openAdd=!0,this.resetForm("form"),this.word={},this.form={}},searchWord:function(){var t=this;this.$refs["form"].validate((function(e){e&&Object(a["d"])({wordName:t.form.wordName}).then((function(e){t.word=e.data}))}))},addWordSubmit:function(){var t=this;this.$refs["form"].validate((function(e){e&&Object(a["b"])(t.articleId,t.form.wordName).then((function(){t.$modal.msgSuccess("添加成功"),t.openAdd=!1,t.getWordList()}))}))},handleUpdate:function(t){this.form=t,this.openEdit=!0,this.isEdit=!0},getFromApi:function(){var t=this;Object(a["e"])(this.form.wordName).then((function(e){var n=e.data,r=n.phonetics,i=n.acceptation,a=n.phMp3;t.form=Object(o["a"])(Object(o["a"])({},t.form),{},{phonetics:r,acceptation:i,phMp3:a})}))},saveWordSubmit:function(){var t=this;this.isEdit?Object(a["i"])(this.form).then((function(){t.$modal.msgSuccess("修改成功"),t.openEdit=!1,t.getWordList()})):Object(a["a"])(this.form).then((function(){t.$modal.msgSuccess("增加成功"),t.openEdit=!1,t.getWordList()}))}}},c=l,s=n("2877"),d=Object(s["a"])(c,r,i,!1,null,"0bebe722",null);e["a"]=d.exports},"7e12":function(t,e,n){var r=n("da84"),i=n("d039"),o=n("e330"),a=n("577e"),l=n("58a8").trim,c=n("5899"),s=o("".charAt),d=r.parseFloat,u=r.Symbol,p=u&&u.iterator,f=1/d(c+"-0")!==-1/0||p&&!i((function(){d(Object(p))}));t.exports=f?function(t){var e=l(a(t)),n=d(e);return 0===n&&"-"==s(e,0)?-0:n}:d},"9be0":function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["eng:article:edit"],expression:"['eng:article:edit']"}],attrs:{size:"mini",type:"text",icon:"el-icon-chat-line-square"},on:{click:t.handleReadArticle}},[t._v(" 跟读 ")])},i=[],o=(n("14d9"),{props:["articleId"],methods:{handleReadArticle:function(){this.$router.push("/eng/article/read/"+this.articleId)}}}),a=o,l=n("2877"),c=Object(l["a"])(a,r,i,!1,null,null,null);e["a"]=c.exports},ac3c:function(t,e,n){"use strict";n.d(e,"e",(function(){return i})),n.d(e,"d",(function(){return o})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return l})),n.d(e,"f",(function(){return c})),n.d(e,"b",(function(){return s}));var r=n("b775");function i(t){return Object(r["a"])({url:"/eng/sentence/list",method:"get",params:t})}function o(t){return Object(r["a"])({url:"/eng/sentence/list/play",method:"get",params:t})}function a(t){return Object(r["a"])({url:"/eng/sentence/"+t,method:"get"})}function l(t){return Object(r["a"])({url:"/eng/sentence",method:"post",data:t})}function c(t){return Object(r["a"])({url:"/eng/sentence",method:"put",data:t})}function s(t){return Object(r["a"])({url:"/eng/sentence/"+t,method:"delete"})}},addb:function(t,e,n){var r=n("4dae"),i=Math.floor,o=function(t,e){var n=t.length,c=i(n/2);return n<8?a(t,e):l(t,o(r(t,0,c),e),o(r(t,c),e),e)},a=function(t,e){var n,r,i=t.length,o=1;while(o<i){r=o,n=t[o];while(r&&e(t[r-1],n)>0)t[r]=t[--r];r!==o++&&(t[r]=n)}return t},l=function(t,e,n,r){var i=e.length,o=n.length,a=0,l=0;while(a<i||l<o)t[a+l]=a<i&&l<o?r(e[a],n[l])<=0?e[a++]:n[l++]:a<i?e[a++]:n[l++];return t};t.exports=o},baee:function(t,e,n){"use strict";n.d(e,"f",(function(){return i})),n.d(e,"g",(function(){return o})),n.d(e,"d",(function(){return a})),n.d(e,"a",(function(){return l})),n.d(e,"h",(function(){return c})),n.d(e,"b",(function(){return s})),n.d(e,"e",(function(){return d})),n.d(e,"i",(function(){return u})),n.d(e,"c",(function(){return p}));var r=n("b775");function i(t){return Object(r["a"])({url:"/eng/word/list",method:"get",params:t})}function o(t){return Object(r["a"])({url:"/eng/word/list/"+t.articleId,method:"get",params:t})}function a(t){var e=t.wordName;return Object(r["a"])({url:"/eng/word?wordName="+e,method:"get"})}function l(t){return Object(r["a"])({url:"/eng/word",method:"post",data:t})}function c(t,e){return Object(r["a"])({url:"/eng/word/"+t,method:"post",contentType:"application/x-www-form-urlencoded",data:{words:e}})}function s(t,e){return Object(r["a"])({url:"/eng/word/"+t+"/"+e,method:"post"})}function d(t){return Object(r["a"])({url:"/eng/word/api/"+t,method:"get"})}function u(t){return Object(r["a"])({url:"/eng/word",method:"put",data:t})}function p(t){return Object(r["a"])({url:"/eng/word/"+t,method:"delete"})}},c074:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));n("ac1f"),n("00b4");var r,i=new Audio,o=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};i.src="/prod-api"+t,i.load(),clearTimeout(r),i.pause();var o,a,l=1,c=(e||"").split(",");if(2==c.length||3==c.length){if(/^\d+$/.test(c[0]))a=parseInt(c[0]);else if(/^\d+:\d+$/.test(c[0])){var s=c[0].split(":");a=60*parseInt(s[0])+parseInt(s[1])}/^\d+(.\d+)*$/.test(c[1])&&(o=parseFloat(c[1])),c[2]&&(l=parseFloat(c[2]))}if(i.currentTime=0|a,i.playbackRate=l,i.play().catch((function(t){n&&n(t)})),o){var d=o/l;console.log("duration",d),r=setTimeout((function(){i.pause()}),1e3*d)}return i}},c20d:function(t,e,n){var r=n("da84"),i=n("d039"),o=n("e330"),a=n("577e"),l=n("58a8").trim,c=n("5899"),s=r.parseInt,d=r.Symbol,u=d&&d.iterator,p=/^[+-]?0x/i,f=o(p.exec),m=8!==s(c+"08")||22!==s(c+"0x16")||u&&!i((function(){s(Object(u))}));t.exports=m?function(t,e){var n=l(a(t));return s(n,e>>>0||(f(p,n)?16:10))}:s},c35a:function(t,e,n){var r=n("23e7"),i=n("7e12");r({target:"Number",stat:!0,forced:Number.parseFloat!=i},{parseFloat:i})},d463:function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-button",{attrs:{size:"mini",type:"text",icon:"el-icon-coordinate"},on:{click:t.handleTest}},[t._v("测试")])},i=[],o=(n("14d9"),{props:["articleId"],methods:{handleTest:function(){this.$router.push("/eng/article/test/"+this.articleId)}}}),a=o,l=n("2877"),c=Object(l["a"])(a,r,i,!1,null,null,null);e["a"]=c.exports},d998:function(t,e,n){var r=n("342f");t.exports=/MSIE|Trident/.test(r)},dcec:function(t,e,n){"use strict";n.d(e,"e",(function(){return i})),n.d(e,"d",(function(){return o})),n.d(e,"a",(function(){return a})),n.d(e,"g",(function(){return l})),n.d(e,"b",(function(){return c})),n.d(e,"f",(function(){return s})),n.d(e,"c",(function(){return d}));var r=n("b775");function i(t){return Object(r["a"])({url:"/eng/article/list",method:"get",params:t})}function o(t){return Object(r["a"])({url:"/eng/article/"+t,method:"get"})}function a(t){return Object(r["a"])({url:"/eng/article",method:"post",data:t})}function l(t){return Object(r["a"])({url:"/eng/article",method:"put",data:t})}function c(t){return Object(r["a"])({url:"/eng/article/"+t,method:"delete"})}function s(t){return Object(r["a"])({url:"/eng/article/list/play",method:"get",params:t})}function d(t){return Object(r["a"])({url:"/eng/article/export/"+t,method:"get"})}},e532:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return o}));var r=n("b775");function i(t){return Object(r["a"])({url:"/eng/articleWordRel",method:"post",data:t})}function o(t){return Object(r["a"])({url:"/eng/articleWordRel/"+t,method:"delete"})}},f15b:function(t,e,n){"use strict";n("5f25")}}]);