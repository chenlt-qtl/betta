(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-67dec855"],{6308:function(t,e,n){"use strict";n.r(e);var i,a,r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"playlist"},[n("div",{staticClass:"phone"},[n("div",{staticClass:"inner"},[t._m(0),n("div",{staticClass:"cover"},[n("img",{attrs:{src:t.baseUrl+"/profile/sys/img/18159534045164927.jpg",alt:"Sober Up"}})]),n("div",{staticClass:"info"},[n("h3",{staticClass:"song"},[t._v(t._s(t.mp3Name))]),n("h4",{staticClass:"artist"},[t._v(t._s(t.displayStr))])]),n("div",{staticClass:"time"},[n("div",{staticClass:"bar",style:{width:t.barPercent+"%"}})]),n("div",{staticClass:"control"},[n("button",{staticClass:"controlButton",on:{click:function(){return t.step(-1)}}},[n("i",{staticClass:"fa fa-step-backward"})]),n("button",{staticClass:"playButton",on:{click:t.playList}},[n("div",[t.isPlaying?t._e():n("i",{staticClass:"fa fa-play"}),t.isPlaying?n("i",{staticClass:"fa fa-pause",staticStyle:{"font-size":"22px",left:"0"}}):t._e()])]),n("button",{staticClass:"controlButton",on:{click:function(){return t.step(1)}}},[n("i",{staticClass:"fa fa-step-forward"})])])])])])},s=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"header"},[n("button",{staticClass:"button back"},[n("i",{staticClass:"fa fa-arrow-left"})]),n("h2",{staticClass:"title"},[t._v("播放列表")]),n("button",{staticClass:"button more"},[n("i",{staticClass:"fa fa-ellipsis-h"})])])}],c=n("c7eb"),u=n("1da1"),l=n("5530"),o=(n("4de4"),n("14d9"),n("b0c0"),n("d3b7"),n("159b"),n("c074")),d=n("ac3c"),p=n("2f62"),f=n("dcec"),h=n("baee"),m={data:function(){return{baseUrl:"/prod-api",playIndex:-1,isPlaying:!1,listData:[],restTime:5400,isTimed:!1}},computed:Object(l["a"])(Object(l["a"])({},Object(p["b"])(["name"])),{},{mp3Name:function(){return this.listData.length>0&&-1!=this.playIndex?this.listData[this.playIndex].articleName:"无标题"},displayStr:function(){var t="",e=Math.floor(this.restTime/60);t+=e<10?"0":"",t+=e;var n=this.restTime%60;return t+=n<10?" : 0":" : ",t+=n,t},barPercent:function(){return 0==this.listData.length||-1==this.playIndex?0:100*(this.playIndex+1)/this.listData.length}}),created:function(){var t=this,e=this.$route.query&&this.$route.query.article;if(e)this.getArticleDetail(e);else{var n=this.name;if(!n&&(n=this.$route.query&&this.$route.query.u,!n))return void this.$modal.msgError("请输入用户名或文章ID");Object(d["d"])({pageNum:1,pageSize:1e3,inPlayList:!0,username:n}).then((function(e){t.listData=e.rows.filter((function(t){return t.mp3}))}))}},methods:{getArticleDetail:function(t){var e=this;return Object(u["a"])(Object(c["a"])().mark((function n(){var i,a,r,s,u;return Object(c["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=[],n.next=3,Object(f["c"])(t);case 3:return a=n.sent,r=a.data,n.next=7,Object(d["e"])({pageNum:1,pageSize:1e3,articleId:t});case 7:return s=n.sent,s.rows&&s.rows.length>0&&s.rows.forEach((function(t){return i.push({mp3:t.mp3Time?r.mp3:t.mp3,mp3Time:t.mp3Time,articleName:r.title})})),n.next=11,Object(h["e"])({pageNum:1,pageSize:1e3,articleId:t});case 11:u=n.sent,u.rows&&u.rows.length>0&&u.rows.forEach((function(t){return i.push({mp3:t.phAnMp3,articleName:r.title})})),e.listData=i;case 14:case"end":return n.stop()}}),n)})))()},playList:function(){this.listData.length<=0?this.$modal.msgError("播放列表为空"):(this.isPlaying=!this.isPlaying,this.isPlaying?i?i.play():(this.playIndex=0,i=this.playMp3(),i.addEventListener("pause",this.onEnded)):i.pause(),this.isPlaying&&this.isTimed&&this.timed())},onEnded:function(){var t=this;if(this.isPlaying){if(this.playIndex<this.listData.length-1)this.playIndex=this.playIndex+1;else{if(!this.isTimed)return;this.playIndex=0}setTimeout((function(){return t.playMp3()}),1500)}},timed:function(){var t=this;this.restTime<=0?(clearInterval(a),a=null,i.pause()):this.isPlaying&&(this.restTime=this.restTime-1,a=setTimeout((function(){return t.timed()}),1e3))},playMp3:function(){var t=this.listData.length;if(t>0&&this.playIndex<t&&this.playIndex>=0){var e=this.listData[this.playIndex],n=e.mp3,a=e.mp3Time;return i=Object(o["a"])(n,a),i}},step:function(t){if(i){var e=this.listData.length,n=this.playIndex+t;n<e-1&&n>=0&&(this.playIndex=n,i.pause(),this.playMp3())}}}},b=m,g=(n("e9c5"),n("2877")),y=Object(g["a"])(b,r,s,!1,null,"552bdd16",null);e["default"]=y.exports},"89b8":function(t,e,n){},ac3c:function(t,e,n){"use strict";n.d(e,"e",(function(){return a})),n.d(e,"d",(function(){return r})),n.d(e,"c",(function(){return s})),n.d(e,"a",(function(){return c})),n.d(e,"f",(function(){return u})),n.d(e,"b",(function(){return l}));var i=n("b775");function a(t){return Object(i["a"])({url:"/eng/sentence/list",method:"get",params:t})}function r(t){return Object(i["a"])({url:"/eng/sentence/list/play",method:"get",params:t})}function s(t){return Object(i["a"])({url:"/eng/sentence/"+t,method:"get"})}function c(t){return Object(i["a"])({url:"/eng/sentence",method:"post",data:t})}function u(t){return Object(i["a"])({url:"/eng/sentence",method:"put",data:t})}function l(t){return Object(i["a"])({url:"/eng/sentence/"+t,method:"delete"})}},baee:function(t,e,n){"use strict";n.d(e,"d",(function(){return a})),n.d(e,"e",(function(){return r})),n.d(e,"c",(function(){return s})),n.d(e,"a",(function(){return c})),n.d(e,"f",(function(){return u})),n.d(e,"b",(function(){return l}));var i=n("b775");function a(t){return Object(i["a"])({url:"/eng/word/new",method:"get",params:t})}function r(t){return Object(i["a"])({url:"/eng/word/list/"+t.articleId,method:"get",params:t})}function s(t){var e=t.wordName;return Object(i["a"])({url:"/eng/word?wordName="+e,method:"get"})}function c(t,e){return Object(i["a"])({url:"/eng/word/"+t,method:"post",contentType:"application/x-www-form-urlencoded",data:{words:e}})}function u(t){return Object(i["a"])({url:"/eng/word",method:"put",data:t})}function l(t){return Object(i["a"])({url:"/eng/word/"+t,method:"delete"})}},c074:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));n("ac1f"),n("00b4");var i,a=new Audio,r=function(t,e){var n,r,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;console.log("=============play url=================="),console.log(t),console.log("===================================="),a.src="/prod-api"+t,a.load(),clearTimeout(i),a.pause();var c=(e||"").split(",");if(2==c.length){if(/^\d+$/.test(c[0]))r=parseInt(c[0]);else if(/^\d+:\d+$/.test(c[0])){var u=c[0].split(":");r=60*parseInt(u[0])+parseInt(u[1])}/^\d+(.\d+)*$/.test(c[1])&&(n=parseFloat(c[1]))}if(a.currentTime=0|r,a.playbackRate=s,a.play(),n){var l=n/s;console.log("duration",l),i=setTimeout((function(){a.pause()}),1e3*l)}return a}},dcec:function(t,e,n){"use strict";n.d(e,"d",(function(){return a})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return s})),n.d(e,"e",(function(){return c})),n.d(e,"b",(function(){return u}));var i=n("b775");function a(t){return Object(i["a"])({url:"/eng/article/list",method:"get",params:t})}function r(t){return Object(i["a"])({url:"/eng/article/"+t,method:"get"})}function s(t){return Object(i["a"])({url:"/eng/article",method:"post",data:t})}function c(t){return Object(i["a"])({url:"/eng/article",method:"put",data:t})}function u(t){return Object(i["a"])({url:"/eng/article/"+t,method:"delete"})}},e9c5:function(t,e,n){"use strict";n("89b8")}}]);