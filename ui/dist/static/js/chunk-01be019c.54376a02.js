(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-01be019c"],{"1ddf":function(t,e,a){"use strict";a("5c92")},"3e38":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=this,a=e.$createElement,n=e._self._c||a;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"app-container"},[n("TopBar",{attrs:{timeType:e.timeType,changeTimeType:e.onTimeTypeChange,openDialog:function(){e.task={},e.open=!0}}}),n("TaskTabs",{attrs:{taskStatus:e.queryParams.taskStatus,changeStatus:function(t){return e.queryParams=Object.assign({},e.queryParams,{taskStatus:t})}}}),n("span",{staticClass:"cardName"},[e._v("普通任务")]),n("el-row",{staticClass:"content"},[n("div",{staticClass:"card"},[n("TaskList",{attrs:{getTaskList:e.getList,listData:e.normalData,onEditTask:e.onEditTask}})],1)]),n("span",{staticClass:"cardName"},[e._v("长期任务")]),n("el-row",{staticClass:"content"},[n("div",{staticClass:"card"},[n("TaskList",{attrs:{getTaskList:e.getList,listData:e.longTermData,onEditTask:e.onEditTask}})],1)]),n("TaskEditDialog",{attrs:{task:e.task,open:e.open,setOpen:function(e){return t.open=e},getTaskList:e.getList}})],1)},s=[],i=a("5530"),o=(a("4de4"),a("d3b7"),a("d09d")),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("el-radio-group",{attrs:{value:t.timeType,size:"mini"},on:{input:t.changeTimeType}},[a("el-radio-button",{attrs:{label:"0"}},[t._v("所有")]),a("el-radio-button",{attrs:{label:"1"}},[t._v("本周")]),a("el-radio-button",{attrs:{label:"2"}},[t._v("本月")])],1),a("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-plus",circle:""},on:{click:t.openDialog}})],1)},c=[],u={name:"TopBar",props:["timeType","changeTimeType","openDialog"],data:function(){return{}}},l=u,d=(a("1ddf"),a("2877")),f=Object(d["a"])(l,r,c,!1,null,"6c57fab0",null),m=f.exports,p=a("f98b"),k=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tabDiv"},[a("ul",{staticClass:"tabs"},t._l(["所有","进行中","已完成"],(function(e,n){return a("li",{key:e,class:"tab "+(t.taskStatus==n?"active":""),on:{click:function(){return t.changeStatus(n)}}},[t._v(" "+t._s(e)+" ")])})),0),a("span",{staticClass:"line",style:{left:33*(t.taskStatus+.5)-2.5+"%"}})])},g=[],h={name:"Task",props:["taskStatus","changeStatus"]},b=h,T=(a("f4e6"),Object(d["a"])(b,k,g,!1,null,"370d7481",null)),v=T.exports,y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{visible:t.open,width:"400px","append-to-body":"",top:"50vh",title:t.title},on:{"update:visible":function(e){t.open=e}}},[a("el-form",{ref:"form",attrs:{"label-width":"0",model:t.form},nativeOn:{submit:function(t){t.preventDefault()}}},[a("el-form-item",{attrs:{prop:"content",rules:[{required:!0,message:"任务不能为空"}]}},[a("el-input",{attrs:{placeholder:"请输入任务"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.onSaveTask(e)}},model:{value:t.form.content,callback:function(e){t.$set(t.form,"content",e)},expression:"form.content"}})],1),a("el-checkbox",{model:{value:t.form.isLongTerm,callback:function(e){t.$set(t.form,"isLongTerm",e)},expression:"form.isLongTerm"}},[t._v("长期任务")])],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.onSaveTask}},[t._v("保 存")]),t.task.id?a("el-button",{attrs:{type:"danger"},on:{click:t.onDelete}},[t._v("删 除")]):t._e(),a("el-button",{on:{click:function(){return t.setOpen(!1)}}},[t._v("取 消")])],1)],1)},O=[],_={name:"AddTaskBar",props:["open","setOpen","getTaskList","task"],data:function(){return{loading:!1,showMsg:!1,title:"",timeType:1,form:{isLongTerm:!1,content:""}}},watch:{open:function(){this.open&&(this.form=Object(i["a"])(Object(i["a"])({},this.task),{},{isLongTerm:2==this.task.type}),this.$refs["form"]&&this.$refs["form"].resetFields(),this.title=(this.form.id?"修改":"新增")+"任务")}},methods:{onSaveTask:function(){var t=this;this.$refs["form"].validate((function(e){if(e){var a,n=Object(i["a"])(Object(i["a"])({},t.form),{},{type:t.form.isLongTerm?2:1});t.form.id?a=o["e"]:(a=o["a"],n.taskStatus=1),t.loading=!0,a(n).then((function(){t.loading=!1,t.$modal.msgSuccess("保存成功"),t.setOpen(!1),t.getTaskList()}))}}))},onDelete:function(){var t=this;this.$confirm('删除任务"'+this.task.content+'"？',"提示",{type:"warning"}).then((function(){return t.loading=!0,Object(o["b"])(t.task.id)})).then((function(){t.loading=!1,t.getTaskList(),t.setOpen(!1),t.$modal.msgSuccess("删除成功")})).catch((function(){}))}}},L=_,S=Object(d["a"])(L,y,O,!1,null,"18172ff2",null),j=S.exports,C={name:"Task",components:{TaskList:p["a"],TopBar:m,TaskTabs:v,TaskEditDialog:j},data:function(){return{loading:!0,taskList:[],open:!1,task:{},queryParams:{pageNum:1,pageSize:1e3,taskStatus:1,params:{timeType:0}}}},computed:{normalData:function(){return this.taskList.filter((function(t){return 1==t.type}))},longTermData:function(){return this.taskList.filter((function(t){return 2==t.type}))},timeType:function(){return this.queryParams.params.timeType}},watch:{queryParams:function(){this.getList()}},created:function(){this.getList()},methods:{getList:function(){var t=this;this.loading=!0,Object(o["d"])(this.queryParams).then((function(e){t.taskList=e.rows,t.loading=!1}))},onEditTask:function(t){this.task=t,this.open=!0},onTimeTypeChange:function(t){this.queryParams=Object(i["a"])(Object(i["a"])({},this.queryParams),{},{params:Object(i["a"])(Object(i["a"])({},this.queryParams.params),{},{timeType:t})})}}},D=C,w=(a("f917"),Object(d["a"])(D,n,s,!1,null,"9fad5380",null));e["default"]=w.exports},"5c92":function(t,e,a){},"759e":function(t,e,a){},"9b5f":function(t,e,a){},c6eb:function(t,e,a){},d09d:function(t,e,a){"use strict";a.d(e,"d",(function(){return s})),a.d(e,"c",(function(){return i})),a.d(e,"a",(function(){return o})),a.d(e,"e",(function(){return r})),a.d(e,"b",(function(){return c}));var n=a("b775");function s(t){return Object(n["a"])({url:"/other/task/list",method:"get",params:t})}function i(t){return Object(n["a"])({url:"/other/task/"+t,method:"get"})}function o(t){return Object(n["a"])({url:"/other/task",method:"post",data:t})}function r(t){return Object(n["a"])({url:"/other/task",method:"put",data:t})}function c(t){return Object(n["a"])({url:"/other/task/"+t,method:"delete"})}},d2f1:function(t,e,a){"use strict";a("9b5f")},f4e6:function(t,e,a){"use strict";a("c6eb")},f917:function(t,e,a){"use strict";a("759e")},f98b:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"taskDiv"},t._l(t.listData,(function(e){return a("ul",{key:e.id,staticClass:"taskList"},[a("li",{class:"taskItem "+(2==e.taskStatus?"gray":""),on:{click:function(){return t.onEditTask(e)}}},[a("div",{staticClass:"taskName"},[t._v(" "+t._s(e.content)+" ")]),a("span",[1==e.taskStatus?a("el-button",{attrs:{round:"",size:"mini"},on:{click:function(a){return t.onChangeStatus(e,2,a)}}},[t._v("完成")]):t._e(),2==e.taskStatus?a("el-button",{attrs:{round:"",size:"mini"},on:{click:function(a){return t.onChangeStatus(e,1,a)}}},[t._v("重启")]):t._e()],1)])])})),0)},s=[],i=a("5530"),o=a("d09d"),r={name:"TaskList",props:["getTaskList","listData","onEditTask"],data:function(){return{loading:!1}},methods:{onChangeStatus:function(t,e,a){var n=this;a.preventDefault(),a.stopPropagation(),this.loading=!0,Object(o["e"])(Object(i["a"])(Object(i["a"])({},t),{},{taskStatus:e})).then((function(t){n.loading=!1,n.$modal.msgSuccess("修改成功"),n.getTaskList()}))}}},c=r,u=(a("d2f1"),a("2877")),l=Object(u["a"])(c,n,s,!1,null,"7d3ec654",null);e["a"]=l.exports}}]);