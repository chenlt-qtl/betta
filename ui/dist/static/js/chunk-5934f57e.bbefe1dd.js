(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5934f57e"],{"45b1":function(t,e,n){},6308:function(t,e,n){"use strict";n.r(e);var r,a,i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"playlist"},[n("div",{staticClass:"phone"},[n("div",{staticClass:"inner"},[t._m(0),n("div",{staticClass:"cover"},[n("img",{attrs:{src:t.process.env.VUE_APP_RESOURCE+"/sys/img/18159534045164927.jpg",alt:"Sober Up"}})]),n("div",{staticClass:"info"},[n("h3",{staticClass:"song"},[t._v(t._s(t.mp3Name))]),n("h4",{staticClass:"artist"},[t._v(t._s(t.displayStr))])]),n("div",{staticClass:"time"},[n("div",{staticClass:"bar",style:{width:t.barPercent+"%"}})]),n("div",{staticClass:"control"},[n("button",{staticClass:"controlButton",on:{click:function(){return t.step(-1)}}},[n("i",{staticClass:"fa fa-step-backward"})]),n("button",{staticClass:"playButton",on:{click:t.playList}},[n("div",[t.isPlaying?t._e():n("i",{staticClass:"fa fa-play"}),t.isPlaying?n("i",{staticClass:"fa fa-pause",staticStyle:{"font-size":"22px",left:"0"}}):t._e()])]),n("button",{staticClass:"controlButton",on:{click:function(){return t.step(1)}}},[n("i",{staticClass:"fa fa-step-forward"})])])])])])},s=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"header"},[n("button",{staticClass:"button back"},[n("i",{staticClass:"fa fa-arrow-left"})]),n("h2",{staticClass:"title"},[t._v("播放列表")]),n("button",{staticClass:"button more"},[n("i",{staticClass:"fa fa-ellipsis-h"})])])}],c=n("c7eb"),u=n("2909"),o=n("1da1"),l=n("5530"),d=(n("14d9"),n("b0c0"),n("d3b7"),n("159b"),n("c074")),f=n("2f62"),h=n("dcec"),p=n("ac3c"),m=n("baee"),g={data:function(){return{baseUrl:"/file",playIndex:-1,isPlaying:!1,listData:[],restTime:5400,isTimed:!1}},computed:Object(l["a"])(Object(l["a"])({},Object(f["b"])(["name"])),{},{mp3Name:function(){return this.listData.length>0&&-1!=this.playIndex?this.listData[this.playIndex].title:"无标题"},displayStr:function(){var t="",e=Math.floor(this.restTime/60);t+=e<10?"0":"",t+=e;var n=this.restTime%60;return t+=n<10?" : 0":" : ",t+=n,t},barPercent:function(){return 0==this.listData.length||-1==this.playIndex?0:100*(this.playIndex+1)/this.listData.length}}),created:function(){var t=this,e=this.$route.query&&this.$route.query.article;if(e)this.getArticleDetail(e);else{var n=this.name;if(!n&&(n=this.$route.query&&this.$route.query.u,!n))return void this.$modal.msgError("请输入用户名或文章ID");Object(h["g"])({pageNum:1,pageSize:1e3,inPlayList:!0,username:n}).then((function(e){var n=e.rows;n.forEach((function(e){return t.getSentence(e)}))}))}},methods:{getSentence:function(t){var e=this;return Object(o["a"])(Object(c["a"])().mark((function n(){var r,a,i;return Object(c["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=Object(u["a"])(e.listData),n.next=3,Object(p["f"])({pageNum:1,pageSize:1e3,articleId:t.id});case 3:return a=n.sent,a.rows&&a.rows.length>0&&a.rows.forEach((function(e){return r.push({mp3:e.mp3Time?t.mp3:e.mp3,mp3Time:e.mp3Time,title:e.content})})),n.next=7,Object(m["g"])({pageNum:1,pageSize:1e3,articleId:t.id});case 7:i=n.sent,i.rows&&i.rows.length>0&&i.rows.forEach((function(t){return r.push({mp3:t.phMp3,title:t.wordName})})),e.listData=r;case 10:case"end":return n.stop()}}),n)})))()},getArticleDetail:function(t){var e=this;return Object(o["a"])(Object(c["a"])().mark((function n(){var r,a;return Object(c["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Object(h["d"])(t);case 2:r=n.sent,a=r.data,e.getSentence(a);case 5:case"end":return n.stop()}}),n)})))()},playList:function(){this.listData.length<=0?this.$modal.msgError("播放列表为空"):(this.isPlaying=!this.isPlaying,this.isPlaying?r?r.play():((new Date).getTime(),this.playIndex=0,r=this.playMp3(),r.addEventListener("pause",this.onEnded)):r.pause(),this.isPlaying&&this.isTimed&&this.timed())},onEnded:function(){var t=this;if(this.isPlaying){(new Date).getTime();this.playIndex<this.listData.length-1?this.playIndex=this.playIndex+1:(this.isTimed,this.playIndex=0),setTimeout((function(){return t.playMp3()}),1500)}},timed:function(){var t=this;this.restTime<=0?(clearInterval(a),a=null,r.pause()):this.isPlaying&&(this.restTime=this.restTime-1,a=setTimeout((function(){return t.timed()}),1e3))},playMp3:function(){var t=this,e=this.listData.length;if(e>0&&this.playIndex<e&&this.playIndex>=0){var n=this.listData[this.playIndex],a=n.mp3,i=n.mp3Time;return r=Object(d["a"])(a,i,(function(){return t.step(1)})),r}},step:function(t){if(r){var e=this.listData.length,n=this.playIndex+t;n<e&&n>=0&&(this.playIndex=n,r.pause(),this.playMp3())}}}},b=g,y=(n("f19a"),n("2877")),v=Object(y["a"])(b,i,s,!1,null,"7f8f35fc",null);e["default"]=v.exports},ac3c:function(t,e,n){"use strict";n.d(e,"f",(function(){return a})),n.d(e,"e",(function(){return i})),n.d(e,"d",(function(){return s})),n.d(e,"a",(function(){return c})),n.d(e,"b",(function(){return u})),n.d(e,"g",(function(){return o})),n.d(e,"c",(function(){return l}));var r=n("b775");function a(t){return Object(r["a"])({url:"/eng/sentence/list",method:"get",params:t})}function i(t){return Object(r["a"])({url:"/eng/sentence/list/play",method:"get",params:t})}function s(t){return Object(r["a"])({url:"/eng/sentence/"+t,method:"get"})}function c(t){return Object(r["a"])({url:"/eng/sentence",method:"post",data:t})}function u(t){return Object(r["a"])({url:"/eng/sentence/batch",method:"post",data:t})}function o(t){return Object(r["a"])({url:"/eng/sentence",method:"put",data:t})}function l(t){return Object(r["a"])({url:"/eng/sentence/"+t,method:"delete"})}},baee:function(t,e,n){"use strict";n.d(e,"f",(function(){return a})),n.d(e,"g",(function(){return i})),n.d(e,"d",(function(){return s})),n.d(e,"a",(function(){return c})),n.d(e,"h",(function(){return u})),n.d(e,"b",(function(){return o})),n.d(e,"e",(function(){return l})),n.d(e,"i",(function(){return d})),n.d(e,"c",(function(){return f}));var r=n("b775");function a(t){return Object(r["a"])({url:"/eng/word/list",method:"get",params:t})}function i(t){return Object(r["a"])({url:"/eng/word/list/"+t.articleId,method:"get",params:t})}function s(t){var e=t.wordName;return Object(r["a"])({url:"/eng/word?wordName="+e,method:"get"})}function c(t){return Object(r["a"])({url:"/eng/word",method:"post",data:t})}function u(t,e){return Object(r["a"])({url:"/eng/word/"+t,method:"post",contentType:"application/x-www-form-urlencoded",data:{words:e}})}function o(t,e){return Object(r["a"])({url:"/eng/word/"+t+"/"+e,method:"post"})}function l(t){return Object(r["a"])({url:"/eng/word/api/"+t,method:"get"})}function d(t){return Object(r["a"])({url:"/eng/word",method:"put",data:t})}function f(t){return Object(r["a"])({url:"/eng/word/"+t,method:"delete"})}},c074:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));n("ac1f"),n("00b4");var r,a=new Audio,i=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};a.src="/file"+t,a.load(),clearTimeout(r),a.pause();var i,s,c=1,u=(e||"").split(",");if(2==u.length||3==u.length){if(/^\d+$/.test(u[0]))s=parseInt(u[0]);else if(/^\d+:\d+$/.test(u[0])){var o=u[0].split(":");s=60*parseInt(o[0])+parseInt(o[1])}/^\d+(.\d+)*$/.test(u[1])&&(i=parseFloat(u[1])),u[2]&&(c=parseFloat(u[2]))}if(a.currentTime=0|s,a.playbackRate=c,a.play().catch((function(t){n&&n(t)})),i){var l=i/c;console.log("duration",l),r=setTimeout((function(){a.pause()}),1e3*l)}return a}},dcec:function(t,e,n){"use strict";n.d(e,"f",(function(){return a})),n.d(e,"d",(function(){return i})),n.d(e,"a",(function(){return s})),n.d(e,"h",(function(){return c})),n.d(e,"b",(function(){return u})),n.d(e,"g",(function(){return o})),n.d(e,"c",(function(){return l})),n.d(e,"e",(function(){return d}));var r=n("b775");function a(t){return Object(r["a"])({url:"/eng/article/list",method:"get",params:t})}function i(t){return Object(r["a"])({url:"/eng/article/"+t,method:"get"})}function s(t){return Object(r["a"])({url:"/eng/article",method:"post",data:t})}function c(t){return Object(r["a"])({url:"/eng/article",method:"put",data:t})}function u(t){return Object(r["a"])({url:"/eng/article/"+t,method:"delete"})}function o(t){return Object(r["a"])({url:"/eng/article/list/play",method:"get",params:t})}function l(t){return Object(r["a"])({url:"/eng/article/export/"+t,method:"get"})}function d(){return Object(r["a"])({url:"/eng/article/current",method:"get"})}},f19a:function(t,e,n){"use strict";n("45b1")}}]);