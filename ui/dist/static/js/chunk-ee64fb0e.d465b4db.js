(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ee64fb0e"],{"0302":function(t,e,a){"use strict";a("6b3b")},"3e38":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=this,a=e.$createElement,n=e._self._c||a;return n("div",{staticClass:"app-container",style:{height:e.containerHeight}},[n("TopBar",{attrs:{timeType:e.timeType,changeTimeType:e.onTimeTypeChange,openDialog:function(){e.task={},e.open=!0},taskStatus:e.queryParams.taskStatus,changeStatus:function(t){return e.queryParams=Object.assign({},e.queryParams,{taskStatus:t})}}}),n("el-row",{staticClass:"content",staticStyle:{"flex-basis":"66%"}},[n("div",{staticClass:"card"},[n("TaskList",{attrs:{type:1,queryParams:e.queryParams,onEditTask:e.onEditTask,pageSize:12}})],1)]),n("el-row",{staticClass:"content",staticStyle:{"flex-basis":"33%"}},[n("div",{staticClass:"card"},[n("TaskList",{attrs:{type:2,queryParams:e.queryParams,onEditTask:e.onEditTask,pageSize:5}})],1)]),n("TaskEditDialog",{attrs:{task:e.task,open:e.open,setOpen:function(e){return t.open=e},getTaskList:function(){return e.queryParams=Object.assign({},e.queryParams)}}})],1)},s=[],i=a("5530"),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("el-radio-group",{attrs:{value:t.taskStatus,size:"mini"},on:{input:t.changeStatus}},[a("el-radio-button",{attrs:{label:"0"}},[t._v("All")]),a("el-radio-button",{attrs:{label:"1"}},[t._v("进行中")]),a("el-radio-button",{attrs:{label:"2"}},[t._v("已完成")])],1),a("el-radio-group",{attrs:{value:t.timeType,size:"mini"},on:{input:t.changeTimeType}},[a("el-radio-button",{attrs:{label:"0"}},[t._v("All")]),a("el-radio-button",{attrs:{label:"2"}},[t._v("本月")]),a("el-radio-button",{attrs:{label:"1"}},[t._v("本周")])],1),a("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-plus",circle:""},on:{click:t.openDialog}})],1)},o=[],c={name:"TopBar",props:["timeType","changeTimeType","openDialog","taskStatus","changeStatus"],data:function(){return{}}},u=c,l=(a("0302"),a("2877")),p=Object(l["a"])(u,r,o,!1,null,"65d142e6",null),m=p.exports,d=a("f98b"),g=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{visible:t.open,width:"400px","append-to-body":"",top:"50vh",title:"",showClose:!1},on:{"update:visible":function(e){t.open=e}}},[a("el-form",{ref:"form",attrs:{"label-width":"0",model:t.form},nativeOn:{submit:function(t){t.preventDefault()}}},[a("el-form-item",{attrs:{prop:"content",rules:[{required:!0,message:"任务不能为空"}]}},[a("el-input",{attrs:{type:"textarea",rows:10,placeholder:"请输入任务"},model:{value:t.form.content,callback:function(e){t.$set(t.form,"content",e)},expression:"form.content"}})],1),a("el-checkbox",{model:{value:t.form.isLongTerm,callback:function(e){t.$set(t.form,"isLongTerm",e)},expression:"form.isLongTerm"}},[t._v("长期任务")])],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.onSaveTask}},[t._v("保 存")]),t.task.id?a("el-button",{attrs:{type:"danger"},on:{click:t.onDelete}},[t._v("删 除")]):t._e(),a("el-button",{on:{click:function(){return t.setOpen(!1)}}},[t._v("取 消")])],1)],1)},f=[],h=a("d09d"),b={name:"AddTaskBar",props:["open","setOpen","getTaskList","task"],data:function(){return{loading:!1,showMsg:!1,title:"",timeType:1,form:{isLongTerm:!1,content:""}}},watch:{open:function(){this.open&&(this.form=Object(i["a"])(Object(i["a"])({},this.task),{},{isLongTerm:2==this.task.type}),this.$refs["form"]&&this.$refs["form"].resetFields(),this.title=(this.form.id?"修改":"新增")+"任务")}},methods:{onSaveTask:function(){var t=this;this.$refs["form"].validate((function(e){if(e){var a,n=Object(i["a"])(Object(i["a"])({},t.form),{},{type:t.form.isLongTerm?2:1});t.form.id?a=h["e"]:(a=h["a"],n.taskStatus=1),t.loading=!0,a(n).then((function(){t.loading=!1,t.$modal.msgSuccess("保存成功"),t.setOpen(!1),t.getTaskList()}))}}))},onDelete:function(){var t=this;this.$confirm('删除任务"'+this.task.content+'"？',"提示",{type:"warning"}).then((function(){return t.loading=!0,Object(h["b"])(t.task.id)})).then((function(){t.loading=!1,t.getTaskList(),t.setOpen(!1),t.$modal.msgSuccess("删除成功")})).catch((function(){}))}}},k=b,y=Object(l["a"])(k,g,f,!1,null,"41e94ade",null),v=y.exports,T=document.body.getBoundingClientRect().width<800,O={name:"Task",components:{TaskList:d["a"],TopBar:m,TaskEditDialog:v},data:function(){return{open:!1,task:{},queryParams:{taskStatus:1,params:{timeType:0}}}},computed:{timeType:function(){return this.queryParams.params.timeType},containerHeight:function(){var t=1==(this.$route.query&&this.$route.query.noBar);return t?T?"calc(100vh - 28px)":"calc(100vh - 36px)":T?"calc(100vh - 52px)":"calc(100vh - 85px)"}},methods:{onEditTask:function(t){this.task=t,this.open=!0},onTimeTypeChange:function(t){this.queryParams=Object(i["a"])(Object(i["a"])({},this.queryParams),{},{params:Object(i["a"])(Object(i["a"])({},this.queryParams.params),{},{timeType:t})})}}},j=O,S=(a("b79a"),Object(l["a"])(j,n,s,!1,null,"a216a972",null));e["default"]=S.exports},"6b3b":function(t,e,a){},b79a:function(t,e,a){"use strict";a("fb24")},b967:function(t,e,a){},cb90:function(t,e,a){"use strict";a("b967")},d09d:function(t,e,a){"use strict";a.d(e,"d",(function(){return s})),a.d(e,"c",(function(){return i})),a.d(e,"a",(function(){return r})),a.d(e,"e",(function(){return o})),a.d(e,"b",(function(){return c}));var n=a("b775");function s(t){return Object(n["a"])({url:"/other/task/list",method:"get",params:t})}function i(t){return Object(n["a"])({url:"/other/task/"+t,method:"get"})}function r(t){return Object(n["a"])({url:"/other/task",method:"post",data:t})}function o(t){return Object(n["a"])({url:"/other/task",method:"put",data:t})}function c(t){return Object(n["a"])({url:"/other/task/"+t,method:"delete"})}},f98b:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"taskDiv"},[a("span",{staticClass:"taskList"},[a("ul",t._l(t.listData,(function(e){return a("li",{key:e.id,class:"taskItem "+(2==e.taskStatus?"gray":""),on:{click:function(){return t.onEditTask(e)}}},[a("div",{staticClass:"taskName"},[t._v(" "+t._s(e.content)+" ")]),a("span",[1==e.taskStatus?a("el-button",{attrs:{type:"primary",round:"",size:"mini",icon:"el-icon-check",title:"完成",plain:""},on:{click:function(a){return t.onChangeStatus(e,2,a)}}}):t._e(),2==e.taskStatus?a("el-button",{attrs:{type:"success",round:"",plain:"",size:"mini",icon:"el-icon-refresh",title:"重启"},on:{click:function(a){return t.onChangeStatus(e,1,a)}}}):t._e()],1)])})),0)]),a("el-pagination",{staticStyle:{"text-align":"right"},attrs:{"hide-on-single-page":t.total<=t.pageSize,small:"","current-page":t.pageParams.pageNum,"page-size":t.pageSize,layout:"prev, pager, next",total:t.total},on:{"current-change":t.handleCurrentChange,"update:currentPage":function(e){return t.$set(t.pageParams,"pageNum",e)},"update:current-page":function(e){return t.$set(t.pageParams,"pageNum",e)}}})],1)},s=[],i=a("5530"),r=(a("d81d"),a("b64b"),a("d09d")),o={name:"TaskList",props:["queryParams","onEditTask","type","pageSize"],data:function(){return{loading:!1,listData:[],total:0,pageParams:{pageNum:1}}},watch:{queryParams:function(t,e){var a=!1;Object.keys(t).map((function(n){t[n]==e[n]||(a=!0)})),a&&(this.pageParams=Object(i["a"])(Object(i["a"])({},this.pageParams),{},{pageNum:1})),this.getList()}},created:function(){this.getList()},methods:{getList:function(){var t=this;this.loading=!0,Object(r["d"])(Object(i["a"])(Object(i["a"])(Object(i["a"])({},this.queryParams),this.pageParams),{},{type:this.type,pageSize:this.pageSize})).then((function(e){t.listData=e.rows,t.total=e.total,t.loading=!1}))},onChangeStatus:function(t,e,a){var n=this;a.preventDefault(),a.stopPropagation(),this.loading=!0,Object(r["e"])(Object(i["a"])(Object(i["a"])({},t),{},{taskStatus:e})).then((function(t){n.loading=!1,n.$modal.msgSuccess("修改成功"),n.getList()}))},handleCurrentChange:function(t){this.pageParams=Object(i["a"])(Object(i["a"])({},this.pageParams),{},{pageNum:t}),this.getList()}}},c=o,u=(a("cb90"),a("2877")),l=Object(u["a"])(c,n,s,!1,null,"6dc8aaba",null);e["a"]=l.exports},fb24:function(t,e,a){}}]);