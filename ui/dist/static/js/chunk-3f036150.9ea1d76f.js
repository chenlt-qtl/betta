(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3f036150"],{"1b84":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"topTitle"},[t._v("任务中心")]),a("div",{staticClass:"tabDiv"},[a("ul",{staticClass:"tabs"},t._l(["进行中","待完成","已完成"],(function(e,n){return a("li",{key:e,class:"tab "+(t.selectedType==n+1?"active":""),on:{click:function(){return t.handleTabClick(n+1)}}},[t._v(" "+t._s(e)+" ")])})),0),a("span",{staticClass:"line",style:{left:33*(t.selectedType-.5)-1+"%"}})]),a("el-row",{staticClass:"content"},[a("div",{staticClass:"card"},[a("AddTaskBar",{attrs:{selectedType:t.selectedType,getTaskList:t.getList}}),a("TaskList",{attrs:{selectedType:t.selectedType,getTaskList:t.getList,listData:t.listData}})],1)])],1)},s=[],i=(a("4de4"),a("d3b7"),a("d09d")),c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[3!=t.selectedType?a("div",{staticClass:"addBar"},[a("i",{staticClass:"el-icon-plus"}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],attrs:{placeholder:"请输入任务内容"},domProps:{value:t.content},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.onAddTask(e)},input:function(e){e.target.composing||(t.content=e.target.value)}}}),a("el-button",{attrs:{type:"text"},on:{click:t.onAddTask}},[t._v("保存")])],1):t._e(),a("div",{staticClass:"errorBar",style:{height:t.showMsg?"36px":0}},[a("el-alert",{attrs:{title:"任务名称不能为空",type:"error","show-icon":""}})],1)])},r=[],o={name:"AddTaskBar",props:["selectedType","getTaskList"],data:function(){return{loading:!0,showMsg:!1,content:""}},methods:{onAddTask:function(){var t=this;this.content?(this.showMsg=!1,Object(i["a"])({content:this.content,type:this.selectedType}).then((function(e){t.$modal.msgSuccess("新增成功"),t.content="",t.getTaskList()}))):(this.showMsg=!0,setTimeout((function(){t.showMsg=!1}),2e3))}}},u=o,l=(a("3ce8"),a("2877")),d=Object(l["a"])(u,c,r,!1,null,"2405eec0",null),p=d.exports,g=a("f98b"),h={name:"Task",components:{AddTaskBar:p,TaskList:g["a"]},data:function(){return{selectedType:1,loading:!0,taskList:[],queryParams:{pageNum:1,pageSize:1e3}}},computed:{listData:function(){var t=this;return this.taskList.filter((function(e){return e.type==t.selectedType}))}},created:function(){this.getList()},methods:{getList:function(){var t=this;this.loading=!0,Object(i["d"])(this.queryParams).then((function(e){t.taskList=e.rows,t.loading=!1}))},handleTabClick:function(t){this.selectedType=t}}},f=h,m=(a("d99d"),Object(l["a"])(f,n,s,!1,null,"46c9cf4e",null));e["default"]=m.exports},"2e14":function(t,e,a){},3695:function(t,e,a){},"3ce8":function(t,e,a){"use strict";a("dd7e")},d09d:function(t,e,a){"use strict";a.d(e,"d",(function(){return s})),a.d(e,"c",(function(){return i})),a.d(e,"a",(function(){return c})),a.d(e,"e",(function(){return r})),a.d(e,"b",(function(){return o}));var n=a("b775");function s(t){return Object(n["a"])({url:"/other/task/list",method:"get",params:t})}function i(t){return Object(n["a"])({url:"/other/task/"+t,method:"get"})}function c(t){return Object(n["a"])({url:"/other/task",method:"post",data:t})}function r(t){return Object(n["a"])({url:"/other/task",method:"put",data:t})}function o(t){return Object(n["a"])({url:"/other/task/"+t,method:"delete"})}},d99d:function(t,e,a){"use strict";a("3695")},dd7e:function(t,e,a){},e38d:function(t,e,a){"use strict";a("2e14")},f98b:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"taskDiv"},[a("span",{staticClass:"taskList"},[a("ul",t._l(t.listData,(function(e){return a("li",{key:e.id,class:"taskItem "+(2==e.taskStatus?"gray":""),on:{click:function(){return t.onEditTask(e)}}},[a("div",{staticClass:"taskName"},[t._v(" "+t._s(e.content)+" ")]),a("span",[1==e.taskStatus?a("el-button",{attrs:{type:"primary",round:"",size:"mini",icon:"el-icon-check",title:"完成",plain:""},on:{click:function(a){return t.onChangeStatus(e,2,a)}}}):t._e(),2==e.taskStatus?a("el-button",{attrs:{type:"success",round:"",plain:"",size:"mini",icon:"el-icon-refresh",title:"重启"},on:{click:function(a){return t.onChangeStatus(e,1,a)}}}):t._e()],1)])})),0)]),a("el-pagination",{staticStyle:{"text-align":"right"},attrs:{"hide-on-single-page":t.total<=t.pageSize,small:"","current-page":t.pageParams.pageNum,"page-size":t.pageSize,layout:"prev, pager, next",total:t.total},on:{"current-change":t.handleCurrentChange,"update:currentPage":function(e){return t.$set(t.pageParams,"pageNum",e)},"update:current-page":function(e){return t.$set(t.pageParams,"pageNum",e)}}})],1)},s=[],i=a("5530"),c=(a("d81d"),a("b64b"),a("d09d")),r={name:"TaskList",props:["queryParams","onEditTask","type","pageSize"],data:function(){return{loading:!1,listData:[],total:0,pageParams:{pageNum:1}}},watch:{queryParams:function(t,e){var a=!1;Object.keys(t).map((function(n){t[n]==e[n]||(a=!0)})),a&&(this.pageParams=Object(i["a"])(Object(i["a"])({},this.pageParams),{},{pageNum:1})),this.getList()}},created:function(){this.getList()},methods:{getList:function(){var t=this;this.loading=!0,Object(c["d"])(Object(i["a"])(Object(i["a"])(Object(i["a"])({},this.queryParams),this.pageParams),{},{type:this.type,pageSize:this.pageSize})).then((function(e){t.listData=e.rows,t.total=e.total,t.loading=!1}))},onChangeStatus:function(t,e,a){var n=this;a.preventDefault(),a.stopPropagation(),this.loading=!0,Object(c["e"])(Object(i["a"])(Object(i["a"])({},t),{},{taskStatus:e})).then((function(t){n.loading=!1,n.$modal.msgSuccess("修改成功"),n.getList()}))},handleCurrentChange:function(t){this.pageParams=Object(i["a"])(Object(i["a"])({},this.pageParams),{},{pageNum:t}),this.getList()}}},o=r,u=(a("e38d"),a("2877")),l=Object(u["a"])(o,n,s,!1,null,"c7e8e41a",null);e["a"]=l.exports}}]);