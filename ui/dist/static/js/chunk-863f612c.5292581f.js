(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-863f612c","chunk-866646c4","chunk-4e24656a","chunk-19d5fd38","chunk-2d0b3a5b"],{"148a":function(t,e,s){},1518:function(t,e,s){},"1afb":function(t,e,s){"use strict";s("4190")},"1dc7":function(t,e,s){"use strict";s.d(e,"a",(function(){return i})),s.d(e,"b",(function(){return r})),s.d(e,"c",(function(){return o}));var n=s("b775");function i(t){return Object(n["a"])({url:"/eng/score/batch",method:"put",data:t})}function r(t,e){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"familiarity",i={pageNum:1,pageSize:s,orderByColumn:n,isAsc:"ascending",articleId:t,withSentence:e};return o(i)}function o(t){return Object(n["a"])({url:"/eng/score/list/user",method:"get",params:t})}},"2335e":function(t,e,s){"use strict";s("d5db")},"28ed":function(t,e,s){"use strict";s.r(e),s.d(e,"getQuestions",(function(){return n}));s("7db0"),s("a15b"),s("14d9"),s("d3b7"),s("4d63"),s("c607"),s("ac1f"),s("2c3e"),s("00b4"),s("25f0"),s("5319"),s("159b");function n(t){if(!t||t.length<5)return[];var e=[];t.forEach((function(s){e.push(i(s,0,t)),e.push(i(s,1,t));var n=i(s,2,t);n&&e.push(n)}));for(var s=e.length,n=0;n<s;n++){var r=parseInt(Math.random()*s),o=e[n];e[n]=e[r],e[r]=o}return e}function i(t,e,s){var n,i,c;switch(e){case 0:n=r,i=t.wordName;break;case 1:n=o,i=r(t);break;case 2:if(!t.sentence||/^\[NT\]/.test(t.sentence))return;n=o,i=t.sentence.replace(new RegExp(t.wordName,"i"),"_____"),c=t.sentenceAcceptation;break}var u=n(t),l=[],d=parseInt(4*Math.random());l[d]=u;for(var h=a(3,t,s),p=0;p<4;p++)if(p!=d){var f=h.pop();l[p]=n(f)}return{type:e,answerKey:d,answers:l,question:i,sentenceAcceptation:c,word:t}}function r(t){return t.exchange||t.acceptation.split("|").join("")}function o(t){return t.wordName}function a(t,e,s){var n=[],i=200,r=function(){i--;var r=parseInt(Math.random()*s.length),o=s[r],a=n.find((function(t){return o.wordName&&t.wordName==o.wordName}));if(a||o.wordName==e.wordName||n.push(o),n.length>=t)return 1};while(i>0)if(r())break;return n}},"3b7c":function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=this,s=e.$createElement,n=e._self._c||s;return n("div",{staticClass:"test-step2"},[n("span",{staticClass:"tip"},[e._v(e._s(e.tip))]),n("section",{staticClass:"question"},[n("section",{style:{fontSize:e.question.type?"16px":"26px"}},[e._v(" "+e._s(e.question.question)+" ")]),e.question.sentenceAcceptation?n("section",[e._v(" "+e._s(this.question.sentenceAcceptation)+" ")]):e._e(),e.question.type?e._e():n("span",{staticClass:"ph"},[e._v(" / "+e._s(this.question.word.phonetics)+" / "),n("svg-icon",{attrs:{"icon-class":"sound"},on:{click:function(){return e.play(t.question.word.phMp3)}}})],1)]),n("section",{staticClass:"answer"},[n("ul",e._l(this.question.answers,(function(t,s){return n("li",{key:t,class:"box-block "+e.getAnswerClass(s),on:{click:function(){return e.choseAnswer(s)}}},[e._v(" "+e._s(t)+" ")])})),0)])])},i=[],r=s("c074"),o={props:["wordList","result","questionList"],data:function(){return{index:0,userAnswer:-1,question:{},isStart:!1,tip:""}},created:function(){this.question=this.questionList[this.index]},watch:{question:function(){0==this.question.type&&this.question.word.phMp3&&Object(r["a"])(this.question.word.phMp3),this.tip=this.index+1+"/"+this.questionList.length}},methods:{getAnswerClass:function(t){if(-1!=this.userAnswer){if(this.userAnswer==t)return this.question.answerKey==t?"right":"wrong";if(this.question.answerKey==t)return"right"}return""},play:function(t){Object(r["a"])(t)},choseAnswer:function(t){var e=this;-1==this.userAnswer&&(this.userAnswer=t,Object(r["a"])(this.question.word.phMp3),t==this.question.answerKey?(this.question.word.familiarity=(this.question.word.familiarity||0)+1,this.result.right=this.result.right+1):(this.question.word.familiarity=(this.question.word.familiarity||0)-1,this.result.wrong=this.result.wrong+1),setTimeout((function(){e.index<e.questionList.length-1?(e.index++,e.userAnswer=-1,e.question=e.questionList[e.index]):e.$emit("next")}),1e3))}}},a=o,c=(s("97f0"),s("2877")),u=Object(c["a"])(a,n,i,!1,null,"384a95b8",null);e["default"]=u.exports},4190:function(t,e,s){},"44cf":function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"test-step1"},[t.isStart?t._e():s("div",{staticClass:"word-table"},[s("el-table",{staticClass:"table",attrs:{data:t.wordList,"show-header":!1}},[s("el-table-column",{attrs:{label:"单词",prop:"wordName"},scopedSlots:t._u([{key:"default",fn:function(e){return e.row.phMp3?[s("div",{staticClass:"word-container"},[s("span",{staticClass:"word"},[t._v(" "+t._s(e.row.wordName))]),s("span",[t._v(" / "+t._s(e.row.phonetics)+" /")])])]:void 0}}],null,!0)})],1),s("div",{staticClass:"toolbar"},[s("button",{staticClass:"block-button",on:{click:t.start}},[t._v("开始")])])],1),t.isStart?s("div",{staticClass:"word-detail"},[s("section",{staticClass:"wordName"},[t._v(" "+t._s(t.word.wordName)+" "),s("el-button",{staticClass:"soundBtn",attrs:{type:"text"},on:{click:function(){return t.play(t.word.phMp3)}}},[s("svg-icon",{attrs:{"icon-class":"sound"}})],1)],1),t.word.phonetics?s("div",{staticClass:"ph"},[t._v("/ "+t._s(t.word.phonetics)+" /")]):t._e(),s("ul",{staticClass:"acceptations"},t._l(t.acceptations,(function(e){return s("li",{key:e},[t._v(" "+t._s(e)+" ")])})),0),s("div",{staticClass:"toolbar"},[s("button",{staticClass:"block-button",staticStyle:{width:"52px"},on:{click:t.nextStep}},[s("i",{staticClass:"el-icon-right"})])])]):t._e()])},i=[],r=s("c074"),o={props:["wordList","questionList"],data:function(){return{index:0,word:{},isStart:!1}},computed:{acceptations:function(){return this.word?this.word.exchange?[this.word.exchange]:this.word.acceptation.split("|"):[]}},watch:{word:function(){this.word&&this.word.phMp3&&Object(r["a"])(this.word.phMp3)}},methods:{changeIndex:function(t){this.index=this.index+t,this.word=this.wordList[this.index]},play:function(t){Object(r["a"])(t)},start:function(){this.isStart=!0,this.word=this.wordList[this.index]},nextStep:function(){this.index<this.wordList.length-1?this.changeIndex(1):this.$emit("next")}}},a=o,c=(s("2335e"),s("2877")),u=Object(c["a"])(a,n,i,!1,null,null,null);e["default"]=u.exports},"97f0":function(t,e,s){"use strict";s("1518")},bcf2:function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"test-step3"},[s("section",{staticClass:"step3-result"},[t._v(" 恭喜您，测试完成！"),s("br"),t._v(" 最终得分 "+t._s(parseInt(100*t.result.right/t.questionList.length))+" 分,答对了 "+t._s(t.result.right)+"题，答错了 "+t._s(t.result.wrong)+" 题。 ")]),s("div",{staticClass:"toolbar"},[s("button",{staticClass:"block-button",on:{click:t.next}},[t._v("下一关")]),t._v(" "),s("button",{staticClass:"block-button",on:{click:t.back}},[t._v("返回")])])])},i=[],r=(s("14d9"),{props:["wordList","result","questionList"],data:function(){return{index:0,userAnswer:-1,question:{},isStart:!1,tip:""}},created:function(){},methods:{next:function(){this.$emit("next")},back:function(){this.$router.push("/eng/article")}}}),o=r,a=(s("1afb"),s("2877")),c=Object(a["a"])(o,n,i,!1,null,"03a17cfc",null);e["default"]=c.exports},c074:function(t,e,s){"use strict";s.d(e,"a",(function(){return r}));s("ac1f"),s("00b4");var n,i=new Audio,r=function(t,e){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};i.src="/prod-api"+t,i.load(),clearTimeout(n),i.pause();var r,o,a=1,c=(e||"").split(",");if(2==c.length||3==c.length){if(/^\d+$/.test(c[0]))o=parseInt(c[0]);else if(/^\d+:\d+$/.test(c[0])){var u=c[0].split(":");o=60*parseInt(u[0])+parseInt(u[1])}/^\d+(.\d+)*$/.test(c[1])&&(r=parseFloat(c[1])),c[2]&&(a=parseFloat(c[2]))}if(i.currentTime=0|o,i.playbackRate=a,i.play().catch((function(t){s&&s(t)})),r){var l=r/a;console.log("duration",l),n=setTimeout((function(){i.pause()}),1e3*l)}return i}},d5db:function(t,e,s){},e4cf:function(t,e,s){"use strict";s("148a")},edff:function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"test-article"},[s("section",{staticClass:"test-container"},[1==t.step?s("step1",{attrs:{wordList:t.wordList,questionList:t.questionList},on:{next:t.toStep2}}):t._e(),2==t.step?s("step2",{attrs:{wordList:t.wordList,questionList:t.questionList,result:t.result},on:{next:t.toStep3}}):t._e(),3==t.step?s("step3",{attrs:{wordList:t.wordList,result:t.result,questionList:t.questionList},on:{next:t.newLoop}}):t._e()],1)])},i=[],r=(s("4de4"),s("14d9"),s("d3b7"),s("159b"),s("1dc7")),o=s("c074"),a=s("44cf"),c=s("3b7c"),u=s("bcf2"),l=s("28ed"),d={components:{step1:a["default"],step2:c["default"],step3:u["default"]},data:function(){return{loading:!0,wordList:[],questionList:[],result:{right:0,wrong:0},step:0}},created:function(){this.getWords()},methods:{newLoop:function(){this.getWords()},getWords:function(){var t=this,e=this.$route.params&&this.$route.params.articleId;e||this.$message.error("请指定文章ID"),this.loading=!0,Object(r["b"])(e,!0).then((function(e){if(t.wordList=e.rows.filter((function(t){return t.wordName})),t.wordList.length<5)return t.$message.error("单词数小于5个，不能测试"),void t.$router.push("/eng/article");t.questionList=Object(l["getQuestions"])(t.wordList),t.start(),t.loading=!1}))},start:function(){this.step=1,this.result={right:0,wrong:0}},toStep2:function(){this.wordList.forEach((function(t){t.familiarity=(t.familiarity||0)+1})),this.step=2},toStep3:function(){var t=this;this.loading=!0,Object(r["a"])(this.wordList).then((function(e){t.step=3,t.loading=!1}))},play:function(t,e){Object(o["a"])(t,e)},acceptationFormatter:function(t){var e=t.acceptation,s=e.split("|");return s[0]+(s.length>1?"...":"")}}},h=d,p=(s("e4cf"),s("2877")),f=Object(p["a"])(h,n,i,!1,null,null,null);e["default"]=f.exports}}]);